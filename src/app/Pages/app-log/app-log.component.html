<div class="container ">
  <div class="loading-shade" *ngIf="isLoadingResults">
      <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
  </div>
  <div class="header">
      <h1> {{prefix}} </h1>
  </div>
  <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="4px" fxLayoutAlign="start center">
      <div fxFlex="0 0 auto">
          <button class="mat-elevation-z2" matTooltip="پاک کردن فیلتر‌های جستجو" (click)="onSearchRefresh()"
              mat-icon-button aria-label="Refresh">
              <mat-icon>refresh</mat-icon>
          </button>
      </div>
      <div fxFlex="0 0 auto">
          <button class="mat-elevation-z2" matTooltip="جستجو" (click)="getListData()" mat-icon-button
              aria-label="Search">
              <mat-icon>search</mat-icon>
          </button>
      </div>
      <div fxFlex="0 0 auto">
          <div fxLayout="row" fxLayoutGap="4px" fxLayoutAlign="start center">
              <mat-checkbox [(ngModel)]="search.hastime" color="primary"></mat-checkbox>
              <mat-form-field>
                  <mat-label>زمان</mat-label>
                  <input matInput [(ngModel)]="search.time" autocomplete="off" placeholder="زمان">
              </mat-form-field>
          </div>
      </div>
      <div fxFlex="0 0 auto">
          <div fxLayout="row" fxLayoutGap="4px" fxLayoutAlign="start center">
              <mat-checkbox [(ngModel)]="search.hasappLogActionID" color="primary"></mat-checkbox>
              <app-app-log-action-selector setDefault="false" [(selectedID)]="search.appLogActionID"
                  (selected)="onSearchAppLogActionIDSelected($event)" fxFlex></app-app-log-action-selector>

          </div>
      </div>
      <div fxFlex="0 0 auto">
          <div fxLayout="row" fxLayoutGap="4px" fxLayoutAlign="start center">
              <mat-checkbox [(ngModel)]="search.hasappUserName" color="primary"></mat-checkbox>
              <mat-form-field>
                  <mat-label>کاربر</mat-label>
                  <input matInput [(ngModel)]="search.appUserName" autocomplete="off" placeholder="کاربر">
              </mat-form-field>
          </div>
      </div>
      <div fxFlex="0 0 auto">
          <div fxLayout="row" fxLayoutGap="4px" fxLayoutAlign="start center">
              <mat-checkbox [(ngModel)]="search.hasiP" color="primary"></mat-checkbox>
              <mat-form-field>
                  <mat-label>IP</mat-label>
                  <input matInput [(ngModel)]="search.iP" autocomplete="off" placeholder="IP">
              </mat-form-field>
          </div>
      </div>
      <div fxFlex="0 0 auto">
          <div fxLayout="row" fxLayoutGap="4px" fxLayoutAlign="start center">
              <mat-checkbox [(ngModel)]="search.hasdescription" color="primary"></mat-checkbox>
              <mat-form-field>
                  <mat-label>شرح</mat-label>
                  <input matInput [(ngModel)]="search.description" autocomplete="off" placeholder="شرح">
              </mat-form-field>
          </div>
      </div>
  </div>
  <div class="table-container mat-elevation-z3 ">
      <table mat-table [dataSource]="data" class="mat-elevation-z8" matSort matSortActive="created"
          matSortDisableClear matSortDirection="desc">
          <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>ثبت</th>
              <td mat-cell *matCellDef="let row">{{row.id}} </td>
          </ng-container>
          <ng-container matColumnDef="time">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>زمان</th>
              <td mat-cell *matCellDef="let row">{{row.time| jalali :'showtime' }} </td>
          </ng-container>
          <ng-container matColumnDef="appLogActionID">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>رخداد</th>
              <td mat-cell *matCellDef="let row"> {{row.appLogAction.name }} </td>
          </ng-container>
          <ng-container matColumnDef="appUserCode">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>کدکاربر</th>
              <td mat-cell *matCellDef="let row">{{row.appUserCode}} </td>
          </ng-container>
          <ng-container matColumnDef="appUserName">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>کاربر</th>
              <td mat-cell *matCellDef="let row">{{row.appUserName}} </td>
          </ng-container>
          <ng-container matColumnDef="iP">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>IP</th>
              <td mat-cell *matCellDef="let row">{{row.ip}} </td>
          </ng-container>
          <ng-container matColumnDef="description">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>شرح</th>
              <td mat-cell *matCellDef="let row">{{row.description}} </td>
          </ng-container>
          <ng-container matColumnDef="act">
              <th mat-header-cell *matHeaderCellDef></th>
              <td dir="ltr" mat-cell *matCellDef="let row ">
                  <button (click)="onDelete(row.id)" mat-icon-button aria-label="delete">
                      <mat-icon>delete</mat-icon>
                  </button>
                  <button (click)="onEdit(row.id)" mat-icon-button aria-label="Edit">
                      <mat-icon>edit</mat-icon>
                  </button>
              </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
  </div>
  <mat-paginator [pageSizeOptions]="[5, 10, 20]" [length]="resultsLength" [pageSize]="10" showFirstLastButtons>
  </mat-paginator>
</div>
